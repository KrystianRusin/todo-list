(()=>{"use strict";const e=()=>({createTodo:(e,t,o,n,a,d)=>({title:e,desc:t,due:o,prio:n,isDone:a,id:Math.floor(1e4*Math.random())}),getTitle:e=>e.title,getDesc:e=>e.desc,getDue:e=>e.due,getPrio:e=>e.prio,setPrio:(e,t)=>{e.prio=t},getIsDone:e=>e.isDone,setIsDone:e=>{e.isDone?e.isDone=!1:e.isDone=!0},getId:e=>e.id}),t=()=>({createProject:(e,t,o)=>({name:e,todoList:t,id:Math.floor(1e4*Math.random())}),getName:e=>e.name,getId:e=>e.projectId,getTodoList:e=>e.todoList,addTodo:(e,t)=>{console.log(e),e.todoList.push(t)},removeTodo:(e,t)=>{let o=e.todoList.filter((e=>e.id!==t));e.todoList=o,console.log(e.todoList)}}),o=e=>{const o=t(),n=document.getElementById("project-list"),d=document.createElement("li"),c=document.createElement("button");c.classList.add("remove-btn"),c.innerHTML="X",c.dataset.projectId=e.id,d.innerHTML=o.getName(e),d.dataset.projectId=e.id,d.appendChild(c),n.append(d),a(e.todoList)},n=()=>{document.getElementById("project-list").innerHTML="";for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);o(JSON.parse(localStorage.getItem(t)))}},a=t=>{e(),document.querySelector(".main-content"),t.forEach((e=>{d(e)}))},d=t=>{const o=e(),n=document.querySelector(".main-content"),a=document.createElement("div");a.classList.add("todo-container");const d=document.createElement("h3");d.innerHTML=o.getTitle(t),d.classList.add("todo-title"),a.appendChild(d);const c=document.createElement("p");c.innerHTML=o.getDesc(t),c.classList.add("todo-desc"),a.appendChild(c);const l=document.createElement("p");l.innerHTML=o.getDue(t),l.classList.add("todo-due"),a.appendChild(l);const r=document.createElement("p");r.innerHTML=o.getPrio(t),r.classList.add("todo-prio"),a.appendChild(r);const i=document.createElement("p");i.innerHTML=o.getIsDone(t),i.classList.add("todo-done"),a.appendChild(i);const s=document.createElement("button");s.dataset.id=o.getId(t),s.innerHTML="X",a.appendChild(s),n.appendChild(a)};let c=0;const l=e=>{t();for(let t=0;t<localStorage.length;t++){let o=localStorage.key(t);if(JSON.parse(localStorage.getItem(o)).id==e)return t}return-1};document.addEventListener("DOMContentLoaded",(function(){(()=>{const o=document.querySelector(".add-task-btn"),d=document.querySelector(".input-modal");n();const r=e(),i=[r.createTodo("test","test","test","low",!1)];o.addEventListener("click",(function(){d.showModal()})),a(i),document.querySelector(".main-content").addEventListener("click",(function(e){"BUTTON"===e.target.tagName&&"DIV"===e.target.parentElement.tagName&&(e.target.getAttribute("data-id"),console.log("removed"))})),document.getElementById("add-task-submit").addEventListener("click",(function(e){e.preventDefault();let o=document.getElementById("title").value,n=document.getElementById("desc").value,a=document.getElementById("date").value,d=document.getElementById("priority").value;(e=>{let o=l(c),n=localStorage.key(o),a=JSON.parse(localStorage.getItem(n));t().addTodo(a,e),localStorage.setItem(n,JSON.stringify(a)),console.log(localStorage.getItem(n))})(r.createTodo(o,n,a,d,!1,Math.floor(1e4*Math.random())))}));const s=document.getElementById("add-project-btn"),m=t();s.addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("project-name").value,o=m.createProject(t,[]);localStorage.setItem(t,JSON.stringify(o)),n()})),document.getElementById("project-list").addEventListener("click",(function(e){var t;"BUTTON"===e.target.tagName&&"LI"===e.target.parentElement.tagName&&(e=>{let t=l(e);localStorage.removeItem(localStorage.key(t)),n()})(e.target.getAttribute("data-project-id")),"LI"===e.target.tagName&&"UL"===e.target.parentElement.tagName&&(t=e.target.getAttribute("data-project-id"),c=t,a(JSON.parse(localStorage.getItem(localStorage.key(l(c)))).todoList))}))})()}))})();