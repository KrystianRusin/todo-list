(()=>{"use strict";const e=()=>({createProject:(e,t,o)=>({name:e,id:t,todoList:o}),getName:e=>e.name,getId:e=>e.projectId,getTodoList:e=>e.todoList,addTodo:(e,t)=>{e.todoList.push(t)},removeTodo:(e,t)=>{let o=e.todoList.filter((e=>e.id!==t));e.todoList=o,console.log(e.todoList)}}),t=t=>{const o=e(),d=document.getElementById("project-list"),c=document.createElement("li"),l=document.createElement("button");l.classList.add("remove-btn"),l.innerHTML="X",l.dataset.projectId=t.id,c.innerHTML=o.getName(t),c.appendChild(l),d.append(c),n(t.todoList)},o=()=>{document.getElementById("project-list").innerHTML="";for(let e=0;e<localStorage.length;e++){let o=localStorage.key(e);t(JSON.parse(localStorage.getItem(o)))}},n=e=>{document.querySelector(".main-content"),e.forEach((e=>{d(e)}))},d=e=>{const t=e=>e.title,o=e=>e.desc,n=e=>e.due,d=e=>e.prio,c=e=>e.isDone,l=document.querySelector(".main-content"),a=document.createElement("div");a.classList.add("todo-container");const r=document.createElement("h3");r.innerHTML=t(e),r.classList.add("todo-title"),a.appendChild(r);const i=document.createElement("p");i.innerHTML=o(e),i.classList.add("todo-desc"),a.appendChild(i);const s=document.createElement("p");s.innerHTML=n(e),s.classList.add("todo-due"),a.appendChild(s);const m=document.createElement("p");m.innerHTML=d(e),m.classList.add("todo-prio"),a.appendChild(m);const u=document.createElement("p");u.innerHTML=c(e),u.classList.add("todo-done"),a.appendChild(u),l.appendChild(a)},c=e=>{const t=document.querySelector(`[data-project-id="${e}"]`);t.addEventListener("click",(function(){let e=t.dataset.projectId,n=l(e);localStorage.removeItem(localStorage.key(n)),o()}))},l=t=>{e();for(let e=0;e<localStorage.length;e++){let o=localStorage.key(e);if(JSON.parse(localStorage.getItem(o)).id==t)return e}return-1};document.addEventListener("DOMContentLoaded",(function(){(()=>{const l=document.querySelector(".add-task-btn"),a=document.querySelector(".input-modal");o();const r=(e,t,o,n,d,c)=>({title:e,desc:t,due:o,prio:n,isDone:d,id:c}),i=[r("test","test","test","low",!1)];l.addEventListener("click",(function(){a.showModal()})),n(i),document.getElementById("add-task-submit").addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("title").value,o=document.getElementById("desc").value,n=document.getElementById("date").value,c=document.getElementById("priority").value;d(r(t,o,n,c,!1,Math.floor(1e4*Math.random())))}));const s=document.getElementById("add-project-btn"),m=e();if(s.addEventListener("click",(function(e){e.preventDefault();let o=document.getElementById("project-name").value,n=Math.floor(1e4*Math.random()),d=m.createProject(o,n,[]);localStorage.setItem(o,JSON.stringify(d)),t(d),c(n)})),localStorage.length>0){for(let e=0;e<localStorage.length;e++){let t=JSON.parse(localStorage.getItem(localStorage.key(e))).id;c(t)}document.querySelectorAll(".remove-btn")}})()}))})();