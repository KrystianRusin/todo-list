(()=>{"use strict";const e=()=>({createTodo:(e,t,o,n,a,d)=>({title:e,desc:t,due:o,prio:n,isDone:a,id:Math.floor(1e4*Math.random())}),getTitle:e=>e.title,getDesc:e=>e.desc,getDue:e=>e.due,getPrio:e=>e.prio,setPrio:(e,t)=>{e.prio=t},getIsDone:e=>e.isDone,setIsDone:e=>{e.isDone?e.isDone=!1:e.isDone=!0},getId:e=>e.id}),t=()=>({createProject:(e,t,o)=>(null==o&&(o=Math.floor(1e4*Math.random())),{name:e,todoList:t,id:o}),getName:e=>e.name,getId:e=>e.projectId,getTodoList:e=>e.todoList,addTodo:(e,t)=>{console.log(e),e.todoList.push(t)},removeTodo:(e,t)=>{let o=e.todoList.filter((e=>e.id!==t));e.todoList=o,console.log(e.todoList)}}),o=e=>{const o=t(),n=document.getElementById("project-list"),d=document.createElement("li");if(d.innerHTML=o.getName(e),d.dataset.projectId=e.id,0!=e.id){const t=document.createElement("button");t.classList.add("remove-btn"),t.innerHTML="X",t.dataset.projectId=e.id,d.appendChild(t)}n.append(d),a(e.todoList)},n=()=>{document.getElementById("project-list").innerHTML="";for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);o(JSON.parse(localStorage.getItem(t)))}},a=t=>{e(),document.querySelector(".main-content").innerHTML="",t.forEach((e=>{d(e)}))},d=t=>{const o=e(),n=document.querySelector(".main-content"),a=document.createElement("div");a.classList.add("todo-container");const d=document.createElement("h3");d.innerHTML=o.getTitle(t),d.classList.add("todo-title"),a.appendChild(d);const l=document.createElement("p");l.innerHTML=o.getDesc(t),l.classList.add("todo-desc"),a.appendChild(l);const c=document.createElement("p");c.innerHTML=o.getDue(t),c.classList.add("todo-due"),a.appendChild(c);const r=document.createElement("p");r.innerHTML=o.getPrio(t),r.classList.add("todo-prio"),a.appendChild(r);const i=document.createElement("p");i.innerHTML=o.getIsDone(t),i.classList.add("todo-done"),a.appendChild(i);const s=document.createElement("button");s.dataset.id=o.getId(t),s.innerHTML="X",a.appendChild(s),n.appendChild(a)};let l=0;document.addEventListener("DOMContentLoaded",(function(){(()=>{const o=document.querySelector(".add-task-btn"),d=document.querySelector(".input-modal");let c=JSON.parse(localStorage.getItem(0));c||(c=t().createProject("All",[],0),localStorage.setItem(0,JSON.stringify(c))),n(),o.addEventListener("click",(function(){d.showModal()})),console.log(JSON.parse(localStorage.getItem(0))),JSON.parse(localStorage.getItem(0)),a(t().getTodoList(c)),document.querySelector(".main-content").addEventListener("click",(function(e){"BUTTON"===e.target.tagName&&"DIV"===e.target.parentElement.tagName&&(e.target.getAttribute("data-id"),console.log("removed"))})),document.getElementById("add-task-submit").addEventListener("click",(function(o){o.preventDefault();let n=document.getElementById("title").value,d=document.getElementById("desc").value,c=document.getElementById("date").value,r=document.getElementById("priority").value;(e=>{let o=l,n=JSON.parse(localStorage.getItem(o));if(t().addTodo(n,e),localStorage.setItem(o,JSON.stringify(n)),0!=o){let o=JSON.parse(localStorage.getItem("0"));t().addTodo(o,e),localStorage.setItem("0",JSON.stringify(o))}localStorage.setItem(o,JSON.stringify(n)),a(n.todoList)})(e().createTodo(n,d,c,r,!1,Math.floor(1e4*Math.random())))}));const r=document.getElementById("add-project-btn"),i=t();r.addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("project-name").value,o=i.createProject(t,[]);localStorage.setItem(o.id,JSON.stringify(o)),n()})),document.getElementById("project-list").addEventListener("click",(function(e){if("BUTTON"===e.target.tagName&&"LI"===e.target.parentElement.tagName&&(o=e.target.getAttribute("data-project-id"),localStorage.removeItem(o),n()),"LI"===e.target.tagName&&"UL"===e.target.parentElement.tagName){(e=>{l=e})(e.target.getAttribute("data-project-id"));let o=JSON.parse(localStorage.getItem(l));console.log(o),a(t().getTodoList(o))}var o}))})()}))})();