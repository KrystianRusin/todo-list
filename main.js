(()=>{"use strict";const e=()=>({createTodo:(e,t,o,a,d,n)=>({title:e,desc:t,due:o,prio:a,isDone:d,id:Math.floor(1e4*Math.random())}),getTitle:e=>e.title,getDesc:e=>e.desc,getDue:e=>e.due,getPrio:e=>e.prio,setPrio:(e,t)=>{e.prio=t},getIsDone:e=>e.isDone,setIsDone:e=>{e.isDone?e.isDone=!1:e.isDone=!0},getId:e=>e.id}),t=()=>({createProject:(e,t,o)=>(null==o&&(o=Math.floor(1e4*Math.random())),{name:e,todoList:t,id:o}),getName:e=>e.name,getId:e=>e.projectId,getTodoList:e=>e.todoList,addTodo:(e,t)=>{e.todoList.push(t)},removeTodo:(e,t)=>e.todoList.filter((e=>e.id!=t)),setTodoList:(e,t)=>{e.todoList=t}}),o=e=>{const o=t(),a=document.getElementById("project-list"),n=document.createElement("li");n.classList.add("project-element");const c=document.createElement("h4");if(c.innerHTML=o.getName(e),c.dataset.projectId=e.id,n.appendChild(c),n.dataset.projectId=e.id,0!=e.id){const t=document.createElement("button");t.classList.add("project-remove-btn"),t.innerHTML="X",t.dataset.projectId=e.id,n.appendChild(t)}a.append(n),d(e.todoList)},a=()=>{document.getElementById("project-list").innerHTML="";for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);o(JSON.parse(localStorage.getItem(t)))}},d=t=>{e(),document.querySelector(".main-content").innerHTML="",t.forEach((e=>{n(e)}))},n=t=>{const o=e(),a=document.querySelector(".main-content"),d=document.createElement("div");d.classList.add("todo-container");const n=document.createElement("h3");n.innerHTML=o.getTitle(t),n.classList.add("todo-title"),d.appendChild(n);const c=document.createElement("p");c.innerHTML=o.getDesc(t),c.classList.add("todo-desc"),d.appendChild(c);const l=document.createElement("p");l.innerHTML=o.getDue(t),l.classList.add("todo-due"),d.appendChild(l);const r=document.createElement("p");r.innerHTML=o.getPrio(t),r.classList.add("todo-prio"),d.appendChild(r);const s=document.createElement("INPUT");s.setAttribute("type","checkbox"),o.getIsDone(t)?s.checked=!0:s.checked=!1,s.classList.add("todo-done"),s.dataset.id=o.getId(t),d.appendChild(s);const i=document.createElement("button");i.classList.add("remove-btn"),i.dataset.id=o.getId(t),i.innerHTML="X",d.appendChild(i),a.appendChild(d)};let c=0;const l=(e,t)=>{console.log(e);for(let o=0;o<t.length;o++)if(t[o].id==e)return o};document.addEventListener("DOMContentLoaded",(function(){(()=>{const o=document.querySelector(".add-task-btn"),n=document.querySelector(".input-modal");let r=JSON.parse(localStorage.getItem(0));r||(r=t().createProject("All",[],0),localStorage.setItem(0,JSON.stringify(r))),a();let s=document.querySelector(`[data-project-id="${c}"]`);s.classList.add("active-project"),o.addEventListener("click",(function(){n.showModal()})),JSON.parse(localStorage.getItem(0)),d(t().getTodoList(r)),document.querySelector(".main-content").addEventListener("click",(function(o){const a=o.target.getAttribute("data-id");"BUTTON"===o.target.tagName&&"DIV"===o.target.parentElement.tagName&&(e=>{let o=c,a=JSON.parse(localStorage.getItem(o));if(t().setTodoList(a,t().removeTodo(a,e)),localStorage.setItem(o,JSON.stringify(a)),0!=o){let o=JSON.parse(localStorage.getItem("0"));t().setTodoList(o,t().removeTodo(o,e)),localStorage.setItem("0",JSON.stringify(o))}d(a.todoList)})(a),"INPUT"===o.target.tagName&&"DIV"===o.target.parentElement.tagName&&(o=>{let a=c,n=JSON.parse(localStorage.getItem(a)),r=n.todoList,s=l(o,r);e().setIsDone(r[s]),t().setTodoList(n,r),localStorage.setItem(a,JSON.stringify(n)),d(r),console.log(r)})(a)})),document.getElementById("add-task-submit").addEventListener("click",(function(o){o.preventDefault();let a=document.getElementById("title").value,l=document.getElementById("desc").value,r=document.getElementById("date").value,s=document.getElementById("priority").value;(e=>{let o=c,a=JSON.parse(localStorage.getItem(o));if(t().addTodo(a,e),localStorage.setItem(o,JSON.stringify(a)),0!=o){let o=JSON.parse(localStorage.getItem("0"));t().addTodo(o,e),localStorage.setItem("0",JSON.stringify(o))}d(a.todoList)})(e().createTodo(a,l,r,s,!1,Math.floor(1e4*Math.random()))),n.close()}));const i=document.getElementById("add-project-btn"),m=t(),g=document.querySelector(".show-form-btn"),p=document.getElementById("add-project-form");i.addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("project-name").value,o=m.createProject(t,[]);localStorage.setItem(o.id,JSON.stringify(o)),a(),g.style.display="block",p.style.display="none"})),document.getElementById("project-list").addEventListener("click",(function(e){if("BUTTON"===e.target.tagName&&"LI"===e.target.parentElement.tagName&&(o=e.target.getAttribute("data-project-id"),localStorage.removeItem(o),a()),"H4"===e.target.tagName&&"LI"===e.target.parentElement.tagName){s=document.querySelector(`[data-project-id="${c}"]`),s.classList.remove("active-project"),(e=>{c=e})(e.target.getAttribute("data-project-id"));let o=JSON.parse(localStorage.getItem(c));s=document.querySelector(`[data-project-id="${c}"]`),s.classList.add("active-project"),d(t().getTodoList(o))}var o})),g.addEventListener("click",(function(){g.style.display="none"===g.style.display?"block":"none",""!==p.style.display&&"none"!==p.style.display||(p.style.display="block")}))})()}))})();